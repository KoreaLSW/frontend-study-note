# 1. React 리렌더링(Re-rendering) 발생 조건 정리

리액트 컴포넌트가 화면을 다시 그리는(Update) 트리거는 명확하게 정해져 있습니다.
단순히 사용자 이벤트(클릭 등)가 발생한다고 해서 리렌더링이 되지 않습니다.

## 1-1. 리렌더링이 발생하는 4가지 핵심 조건

### ① State가 변경되었을 때 (가장 기본)

- `useState`의 `setFunction`, `useReducer`의 `dispatch`로 상태 값이 업데이트되면 트리거됨.
- **중요:** 변경된 값이 이전 값과 동일하면(===) 리렌더링하지 않음.

### ② Props가 변경되었을 때

- 부모 컴포넌트로부터 전달받는 `props` 값이 바뀌면 자식 컴포넌트는 리렌더링됨.

### ③ 부모 컴포넌트가 리렌더링될 때

- 부모가 다시 그려지면, 자식 컴포넌트는 **Props 변경 여부와 상관없이** 무조건 따라서 리렌더링됨.
- _방지법: `React.memo` 사용_

### ④ forceUpdate를 실행했을 때 (강제)

- 강제로 렌더링하는 명령어

---

## 1-2. "클릭 이벤트"와 리렌더링의 관계

> **Q. 버튼을 클릭하면 무조건 리렌더링 되나요?** > **A. 아니요 (No).**

클릭 이벤트는 함수를 실행시키는 신호일 뿐, 그 자체로 렌더링을 유발하지 않습니다.
**핸들러 함수 내부 로직**에 따라 결정됩니다.

### ❌ 리렌더링 안 되는 케이스

단순 콘솔 출력이나 일반 변수 변경만 있는 경우.

```javascript
const handleClick = () => {
  console.log("Clicked"); // 화면 갱신 안 됨
  let temp = 10; // 화면 갱신 안 됨
  ref.current = 20; // 화면 갱신 안 됨 (useRef)
};
```

---

# 2. 리액트(React)의 동작 원리: Virtual DOM과 재조정

## 2-1. 핵심 정의

리액트의 동작 원리는 한마디로 **가상 돔(Virtual DOM)을 이용한 효율적인 업데이트**입니다.

---

## 2-2. 동작 원리

데이터(State)가 변경되었을 때 화면이 갱신되는 **4단계 과정**입니다.

### 🔄 전체 흐름

`State 변경` ➡ `새로운 Virtual DOM 생성` ➡ `비교(Diffing)` ➡ `실제 DOM 반영`

### ① 1단계: Trigger

- 개발자가 `setState` 등으로 상태를 변경합니다.
- 리액트가 화면 갱신의 필요성을 감지합니다.

### ② 2단계: Render Phase

- 변경된 데이터를 바탕으로 **새로운 Virtual DOM 트리**를 메모리에 생성합니다.
- 실제 화면(브라우저)은 아직 건드리지 않습니다.

### ③ 3단계: Diffing

- **이전 Virtual DOM**과 **새로운 Virtual DOM**을 비교합니다.
- **Diffing 알고리즘**을 통해 정확히 **어느 태그, 어느 속성이 바뀌었는지** 찾아냅니다.

### ④ 4단계: Commit Phase

- 찾아낸 **변경된 부분(Difference)만** 실제 브라우저 DOM에 적용합니다.
- 브라우저는 해당 부분만 다시 그립니다(Repaint).

---

## 2-3. 효율적인 비교 전략 (Diffing Algorithm)

리액트는 속도를 위해(O(n)) 전체를 다 뜯어보지 않고 **휴리스틱(Heuristic)** 규칙을 사용합니다.

### ✅ 1. 태그(Type)가 다르면? → "전면 교체"

- 이전: `<div>...</div>` / 현재: `<span>...</span>`
- 부모 태그가 달라지면 내부 자식들을 비교하지 않고, **트리 전체를 삭제 후 재생성**합니다.

### ✅ 2. Key Props의 역할 (리스트)

- 반복문(`map`) 사용 시 `key`가 없으면, 중간에 데이터가 끼어들었을 때 전체를 다시 그리는 비효율이 발생합니다.
- **Key가 있으면**: "아, 얘는 순서만 바뀐 거구나!"라고 인식하여 **위치만 이동**시킵니다.

---

## 2-4. 요약

리액트는 **"더블 버퍼링(Double Buffering)"** 전략을 사용합니다.

1. **메모리에서 먼저 계산하고 (Virtual DOM)**
2. **바뀐 부분만 골라내서 (Diffing)**
3. **최소한의 횟수로 실제 화면을 고칩니다 (Commit)**

👉 이 덕분에 개발자가 "화면 전체를 새로 그려라"라고 명령해도, 리액트가 알아서 **최적의 성능**으로 처리합니다.

```

```
