# React `useContext` 핵심 정리 📡

## 1. 정의 (Definition)

> **"데이터를 일일이 넘겨주지 않고, 전역(Global)으로 공유해서 어디서든 꺼내 쓸 수 있게 하는 훅"**

- **기존 방식 (Props):** 부모 -> 자식 -> 손자... 이렇게 한 단계씩 내려줘야 함.
- **Context 방식:** 데이터를 **"공용 공간(Context)"**에 띄워놓고, 필요한 컴포넌트가 **직통으로** 가져다 씀.

---

## 2. 사용하는 이유 (Why?)

가장 큰 이유는 **"Prop Drilling(프롭 드릴링)"** 문제를 해결하기 위해서입니다.

### 🚨 문제 상황: Prop Drilling

- **상황:** 최상위 컴포넌트(`App`)가 아주 깊은 곳에 있는 `GrandChild`에게 데이터를 주고 싶음.
- **문제:** 중간에 낀 `Parent`, `Child` 컴포넌트는 그 데이터가 필요 없는데도, 오직 **전달하기 위해** 억지로 Props를 받아서 넘겨줘야 함. 코드 관리가 지저분해짐.

### ✅ 해결책 (`useContext`)

- 중간 컴포넌트를 건너뛰고, `App`에서 `GrandChild`로 데이터를 **순간 이동** 시킴.

---

## 3. 사용법 3단계 (Create ➡ Provide ➡ Use)

### ① 1단계: 문맥 만들기 (`createContext`)

데이터를 담을 전용 채널(방송국)을 생성합니다. 보통 별도 파일로 만듭니다.

```javascript
import { createContext } from "react";

// 괄호 안은 초기값 (Provider가 없을 때 사용됨)
export const ThemeContext = createContext(null);
```

### ② 2단계: 데이터 뿌리기 (`Provider`)

데이터를 사용할 컴포넌트들을 Provider라는 우산으로 감싸줍니다.

```javascript
import { ThemeContext } from "./ThemeContext";

function App() {
  const [isDark, setIsDark] = useState(false);

  return (
    // value={...} 안에 공유하고 싶은 데이터를 넣음
    <ThemeContext.Provider value={{ isDark, setIsDark }}>
      <Header />
      <MainPage /> {/* 이 안에 있는 모든 자식, 손자들은 데이터 접근 가능 */}
      <Footer />
    </ThemeContext.Provider>
  );
}
```

### ③ 3단계: 데이터 꺼내 쓰기 (useContext)

아무리 깊은 곳에 있는 자식이라도 훅 한 방이면 데이터를 가져옵니다.

```javascript
import { useContext } from "react";
import { ThemeContext } from "./ThemeContext";

function ThemeButton() {
  // "ThemeContext 채널에서 데이터 좀 줘!"
  const { isDark, setIsDark } = useContext(ThemeContext);

  return (
    <button onClick={() => setIsDark(!isDark)}>
      {isDark ? "라이트 모드로" : "다크 모드로"}
    </button>
  );
}
```

## 4\. 언제 써야 하나요? (Best Practice)

모든 데이터를 Context에 넣는 건 좋지 않습니다. **정말 많은 컴포넌트가 공통으로 필요로 하는 데이터**일 때만 쓰세요.

### ✅ 추천하는 경우

- **테마 데이터:** 다크 모드 / 라이트 모드
- **사용자 정보:** 현재 로그인한 유저 프로필 (Avatar, ID 등)
- **언어 설정:** 다국어 지원 (한국어/영어)

### ❌ 비추천하는 경우

- 단순히 바로 아래 자식에게 넘겨줄 때 (그냥 Props 쓰세요)
- 데이터 변경이 너무 빈번할 때 (성능 이슈 가능성)

---

## 5\. ⚠️ 주의사항: 렌더링 이슈

`Context` 사용 시 가장 조심해야 할 부분입니다.

- **Provider의 `value`가 바뀌면, 그 Context를 구독(`useContext`)하고 있는 모든 컴포넌트가 강제로 리렌더링됩니다.**
- **문제:** 나는 `A` 데이터만 필요한데, 같은 Context 안에 있는 `B` 데이터가 바뀌어도 나까지 리렌더링 됨.
- **해결:** 서로 관련 없는 데이터는 **Context를 쪼개서(분리해서)** 만들어야 합니다. (예: `UserContext`, `ThemeContext` 따로 만들기)
