## 1. async/await

`async/await`는 Promise를 더 간결하고 동기 코드처럼 작성할 수 있게 해주는 문법입니다.

### 기본 사용법

```javascript
// async 함수 선언
async function fetchUserData(userId) {
  try {
    const response = await fetch(`/api/users/${userId}`);
    const user = await response.json();
    return user;
  } catch (error) {
    console.error("에러 발생:", error);
    throw error;
  }
}

// 사용
fetchUserData(1)
  .then((user) => console.log(user))
  .catch((error) => console.error(error));
```

### async 함수 특징

- `async` 함수는 항상 Promise를 반환합니다
- `await`는 Promise가 완료될 때까지 기다립니다
- `await`는 `async` 함수 내부에서만 사용 가능합니다

```javascript
async function example() {
  return "Hello"; // 자동으로 Promise.resolve("Hello")로 감싸짐
}

example().then((result) => console.log(result)); // "Hello"
```

### 순차 처리 vs 병렬 처리

```javascript
// 순차 처리 (느림)
async function sequential() {
  const user = await fetchUser(1); // 1초 대기
  const posts = await fetchPosts(user.id); // 1초 대기
  const comments = await fetchComments(posts[0].id); // 1초 대기
  // 총 3초 소요
}

// 병렬 처리 (빠름)
async function parallel() {
  const [user, posts, comments] = await Promise.all([
    fetchUser(1),
    fetchPosts(1),
    fetchComments(1),
  ]);
  // 총 1초 소요 (가장 오래 걸리는 작업 시간)
}
```

### 에러 처리

```javascript
// try-catch 사용
async function handleError() {
  try {
    const data = await fetchData();
    return data;
  } catch (error) {
    console.error("에러 처리:", error);
    // 에러를 다시 던지거나 기본값 반환
    return null;
  }
}

// 또는 catch 메서드 사용
async function handleError2() {
  const data = await fetchData().catch((error) => {
    console.error("에러:", error);
    return null; // 기본값 반환
  });
  return data;
}
```

### 실전 예시

```javascript
// 여러 API 호출 조합
async function getUserProfile(userId) {
  try {
    const [user, posts, followers] = await Promise.all([
      fetch(`/api/users/${userId}`).then((r) => r.json()),
      fetch(`/api/users/${userId}/posts`).then((r) => r.json()),
      fetch(`/api/users/${userId}/followers`).then((r) => r.json()),
    ]);

    return {
      user,
      posts,
      followers,
      postCount: posts.length,
      followerCount: followers.length,
    };
  } catch (error) {
    console.error("프로필 로드 실패:", error);
    throw error;
  }
}
```
